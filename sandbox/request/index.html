<html>
<head>
  <style>
    body, html {
            margin: 0;
            width: 100%;
            height: 100%;
        }
      .button {
            font-family: sans-serif;
            text-transform: uppercase;
            color: #666;
            cursor: pointer;
            padding: 10px 10px 8px 10px;
            display: inline-block;
            font-size: 14px;
        }
  </style>
  <link rel="stylesheet" href="https://js.arcgis.com/3.29/dijit/themes/claro/claro.css">
    <link rel="stylesheet" href="https://js.arcgis.com/3.29/esri/dijit/geoenrichment/themes/common/main.css">
    <link rel="stylesheet" href="https://js.arcgis.com/3.29/esri/css/esri.css">
  </head>
<body class = claro>
  <script src="https://js.arcgis.com/3.29/"></script>
  <form action=""> 
  <select name="customers" onchange="showPop(this.value); console.log(this.value)">
  <option value="" id="" >Select a customer:</option>
  <option value="geo" id= "1">Basic 1</option>
  <option value="geo2 " id="2">Basic 2</option>
  <option value="geo3" id="3">99 Hudson</option>
  <option value="geo4" id="4">Multi-part Polygon</option>
  <option value="geo5" id="5">Multi-part-append</option>
</select>
</form>

  <div id="txtHint">Customer info will be listed here...</div>
 
 <script>
  //geometry here
  var token = 'DyQ1CBflybQI_4WdJzCz1noCVqCajMwsmtODv9V3ouNXZh5rxlVdN28ZthEkYEJS2eEoXLdPYQttKlzTL_aM6fhhZbiC9xkHfVXp6GhFiaync4rg_2os2xhadMH_piGs19yr87tQjZaE0nHgED_7XkhH-XdspHx9wHqJdaTkZfqe-OQTwvplmnlz0GAiYFxELcc-St9ub8IgAHYqx6_GYg..';
  
//simple geos
  
  geo = '[[[-75.080566,40.031821],[-75.234375,39.91395],[-74.970703,39.800096],[-75.080566,40.031821]]]';

  geo2 = '[[[-75.080566,40.031821],[-75.234375,39.91395],[-74.970703,39.800096],[-75.080566,40.031821]],[[-76.091309,40.697299],[-76.409912,40.313043],[-75.767212,40.292097],[-76.091309,40.697299]]]';

  //geo2 = '[[[-76.091309,40.697299],[-76.409912,40.313043],[-75.767212,40.292097],[-76.091309,40.697299]]]';

//compex geos
  //99 Hudson
  geo3 = '[[[-74.010352,40.718802],[-74.010239,40.719445],[-74.010121,40.720117],[-74.011515,40.720258],[-74.011515,40.720258],[-74.011515,40.720258],[-74.011515,40.720258],[-74.011515,40.720258],[-74.010731,40.720179],[-74.010653,40.720607],[-74.010704,40.720611],[-74.010704,40.720611],[-74.010704,40.720611],[-74.010704,40.720611],[-74.010704,40.720611],[-74.010653,40.720607],[-74.010632,40.720725],[-74.010632,40.720725],[-74.010632,40.720725],[-74.010632,40.720725],[-74.010632,40.720725],[-74.010653,40.720607],[-74.010045,40.720549],[-74.010007,40.720766],[-74.010007,40.720766],[-74.009964,40.721008],[-74.009964,40.721008],[-74.009964,40.721009],[-74.009964,40.721008],[-74.009964,40.721008],[-74.010007,40.720766],[-74.009299,40.720697],[-74.009206,40.721244],[-74.009206,40.721244],[-74.009206,40.721244],[-74.009206,40.721244],[-74.009206,40.721244],[-74.009299,40.720697],[-74.008466,40.720646],[-74.008368,40.721197],[-74.008368,40.721197],[-74.008343,40.72133],[-74.008908,40.721382],[-74.008908,40.721382],[-74.008908,40.721382],[-74.008908,40.721382],[-74.008908,40.721382],[-74.008343,40.72133],[-74.008231,40.721985],[-74.008324,40.721994],[-74.008324,40.721994],[-74.008324,40.721994],[-74.008324,40.721994],[-74.008324,40.721994],[-74.008231,40.721985],[-74.008219,40.722057],[-74.008219,40.722057],[-74.008219,40.722057],[-74.008219,40.722057],[-74.008219,40.722057],[-74.008231,40.721985],[-74.008148,40.721976],[-74.008148,40.721976],[-74.008148,40.721976],[-74.008148,40.721976],[-74.008148,40.721976],[-74.008231,40.721985],[-74.008343,40.72133],[-74.008343,40.72133],[-74.008368,40.721197],[-74.008466,40.720646],[-74.007093,40.720497],[-74.007093,40.720497],[-74.007093,40.720497],[-74.007093,40.720497],[-74.007093,40.720497],[-74.008466,40.720646],[-74.008582,40.719962],[-74.0068,40.719782],[-74.006717,40.720214],[-74.006717,40.720214],[-74.006717,40.720214],[-74.006717,40.720214],[-74.006717,40.720214],[-74.0068,40.719782],[-74.005952,40.719696],[-74.005794,40.7199],[-74.005794,40.7199],[-74.005794,40.7199],[-74.005794,40.7199],[-74.005794,40.7199],[-74.006135,40.719459],[-74.005575,40.719203],[-74.005575,40.719203],[-74.005575,40.719203],[-74.005575,40.719203],[-74.005575,40.719203],[-74.006135,40.719458],[-74.006435,40.719069],[-74.006586,40.718873],[-74.005895,40.718549],[-74.005895,40.718549],[-74.005895,40.718549],[-74.005895,40.718549],[-74.005895,40.718549],[-74.006586,40.718873],[-74.007052,40.718269],[-74.005792,40.717684],[-74.005766,40.717717],[-74.005766,40.717717],[-74.005766,40.717717],[-74.005766,40.717717],[-74.005766,40.717717],[-74.005792,40.717683],[-74.005735,40.717657],[-74.005735,40.717657],[-74.005735,40.717657],[-74.005735,40.717657],[-74.005735,40.717657],[-74.005792,40.717683],[-74.005829,40.717634],[-74.005829,40.717634],[-74.005829,40.717634],[-74.005829,40.717634],[-74.005829,40.717634],[-74.005792,40.717683],[-74.007052,40.718269],[-74.007533,40.717668],[-74.006557,40.717224],[-74.006557,40.717224],[-74.006557,40.717224],[-74.006557,40.717224],[-74.006557,40.717224],[-74.007533,40.717668],[-74.007823,40.717295],[-74.007823,40.717295],[-74.007823,40.717295],[-74.007823,40.717295],[-74.007823,40.717295],[-74.007533,40.717668],[-74.00888,40.718274],[-74.008943,40.717925],[-74.009,40.717598],[-74.008706,40.717464],[-74.008706,40.717464],[-74.008706,40.717464],[-74.008706,40.717464],[-74.008706,40.717464],[-74.009,40.717598],[-74.009045,40.717362],[-74.009045,40.717362],[-74.009045,40.717362],[-74.009045,40.717362],[-74.009045,40.717362],[-74.009,40.717598],[-74.008943,40.717925],[-74.009494,40.717995],[-74.009608,40.717459],[-74.009608,40.717459],[-74.009608,40.717459],[-74.009608,40.717459],[-74.009608,40.717459],[-74.009494,40.717995],[-74.010474,40.718113],[-74.010613,40.717539],[-74.010613,40.717539],[-74.010613,40.717539],[-74.010613,40.717539],[-74.010613,40.717539],[-74.010475,40.718113],[-74.010352,40.718802],[-74.011358,40.718927],[-74.011458,40.71894],[-74.012028,40.71901],[-74.012053,40.718895],[-74.012053,40.718895],[-74.012053,40.718895],[-74.012053,40.718895],[-74.012053,40.718895],[-74.012028,40.71901],[-74.012101,40.719019],[-74.012101,40.719019],[-74.01218,40.719029],[-74.01218,40.719029],[-74.01218,40.719029],[-74.01218,40.71903],[-74.01218,40.71903],[-74.012101,40.71902],[-74.011458,40.71894],[-74.011458,40.71894],[-74.011358,40.718927],[-74.010352,40.718802]]]';

  
  // Multi-part polygon
  geo4 = [[[[-74.010352,40.718802],[-74.010239,40.719445],[-74.010121,40.720117],[-74.011914,40.720298],[-74.011938,40.720184],[-74.011989,40.719938],[-74.011989,40.719938],[-74.011989,40.719938],[-74.011989,40.719938],[-74.011989,40.719938],[-74.011938,40.720184],[-74.012068,40.720197],[-74.012218,40.720213],[-74.012218,40.720213],[-74.012218,40.720213],[-74.012218,40.720213],[-74.012218,40.720213],[-74.012068,40.720198],[-74.012068,40.720198],[-74.011938,40.720184],[-74.011915,40.720298],[-74.012043,40.72031],[-74.012043,40.72031],[-74.012275,40.720335],[-74.012275,40.720335],[-74.012275,40.720335],[-74.012275,40.720335],[-74.012275,40.720335],[-74.012043,40.720311],[-74.011915,40.720298],[-74.011893,40.720414],[-74.012019,40.72043],[-74.012167,40.72045],[-74.012167,40.72045],[-74.012167,40.72045],[-74.012167,40.72045],[-74.012167,40.72045],[-74.012018,40.720431],[-74.012018,40.720431],[-74.011892,40.720414],[-74.011845,40.720663],[-74.011845,40.720663],[-74.011845,40.720663],[-74.011845,40.720663],[-74.011845,40.720663],[-74.011892,40.720414],[-74.011914,40.720298],[-74.010731,40.720179],[-74.010653,40.720607],[-74.010704,40.720611],[-74.010704,40.720611],[-74.010704,40.720611],[-74.010704,40.720611],[-74.010704,40.720611],[-74.010653,40.720607],[-74.010618,40.720803],[-74.010618,40.720803],[-74.010618,40.720803],[-74.010617,40.720803],[-74.010617,40.720803],[-74.010653,40.720607],[-74.010045,40.720549],[-74.010007,40.720766],[-74.009882,40.721471],[-74.009895,40.721472],[-74.009895,40.721472],[-74.009895,40.721472],[-74.009895,40.721472],[-74.009895,40.721472],[-74.009882,40.721471],[-74.00988,40.721481],[-74.00988,40.721481],[-74.00988,40.721481],[-74.00988,40.721481],[-74.00988,40.721481],[-74.009882,40.721471],[-74.009874,40.72147],[-74.009873,40.72147],[-74.009873,40.72147],[-74.009873,40.72147],[-74.009874,40.72147],[-74.009882,40.721471],[-74.010007,40.720766],[-74.009299,40.720697],[-74.009179,40.721406],[-74.009867,40.721469],[-74.009867,40.72147],[-74.009867,40.72147],[-74.009867,40.72147],[-74.009867,40.72147],[-74.009179,40.721407],[-74.009082,40.721931],[-74.009081,40.721931],[-74.009081,40.721931],[-74.009081,40.721931],[-74.009081,40.721931],[-74.009178,40.721407],[-74.008343,40.72133],[-74.008231,40.721985],[-74.009056,40.722068],[-74.009062,40.722037],[-74.009062,40.722037],[-74.009062,40.722037],[-74.009062,40.722037],[-74.009062,40.722037],[-74.009056,40.722068],[-74.009132,40.722076],[-74.009132,40.722076],[-74.009132,40.722076],[-74.009132,40.722076],[-74.009132,40.722076],[-74.008231,40.721985],[-74.008119,40.722644],[-74.008162,40.722648],[-74.008162,40.722648],[-74.008162,40.722648],[-74.008162,40.722648],[-74.008162,40.722648],[-74.008119,40.722644],[-74.008114,40.722675],[-74.008114,40.722675],[-74.008114,40.722675],[-74.008113,40.722675],[-74.008113,40.722675],[-74.008119,40.722644],[-74.008076,40.722639],[-74.008076,40.722639],[-74.008076,40.722639],[-74.008076,40.722639],[-74.008076,40.722639],[-74.008119,40.722644],[-74.008231,40.721985],[-74.007434,40.721898],[-74.007434,40.721898],[-74.007434,40.721898],[-74.007434,40.721898],[-74.007434,40.721898],[-74.008231,40.721985],[-74.008343,40.72133],[-74.008343,40.72133],[-74.008368,40.721197],[-74.008466,40.720646],[-74.006894,40.720475],[-74.006894,40.720475],[-74.006894,40.720475],[-74.006894,40.720475],[-74.006894,40.720475],[-74.008466,40.720646],[-74.008582,40.719962],[-74.0068,40.719782],[-74.006671,40.72045],[-74.006645,40.720594],[-74.006645,40.720594],[-74.006645,40.720594],[-74.006645,40.720594],[-74.006645,40.720594],[-74.006671,40.72045],[-74.00658,40.720441],[-74.00658,40.720441],[-74.00658,40.720441],[-74.00658,40.720441],[-74.00658,40.720441],[-74.006671,40.72045],[-74.0068,40.719782],[-74.005952,40.719696],[-74.005659,40.720075],[-74.005921,40.720196],[-74.005921,40.720196],[-74.005921,40.720196],[-74.005921,40.720196],[-74.005921,40.720196],[-74.005748,40.720116],[-74.005721,40.720153],[-74.005818,40.720197],[-74.005818,40.720197],[-74.005818,40.720197],[-74.005818,40.720197],[-74.005818,40.720197],[-74.005721,40.720153],[-74.005653,40.720243],[-74.005616,40.720292],[-74.00563,40.720293],[-74.00563,40.720293],[-74.00563,40.720293],[-74.00563,40.720293],[-74.00563,40.720293],[-74.005616,40.720292],[-74.005598,40.720315],[-74.005598,40.720315],[-74.005598,40.720315],[-74.005598,40.720315],[-74.005598,40.720315],[-74.005616,40.720292],[-74.005581,40.72031],[-74.005581,40.72031],[-74.005581,40.72031],[-74.005581,40.72031],[-74.005581,40.720309],[-74.005616,40.720292],[-74.005653,40.720243],[-74.005584,40.720216],[-74.005584,40.720216],[-74.005584,40.720216],[-74.005584,40.720216],[-74.005584,40.720216],[-74.005653,40.720242],[-74.00572,40.720153],[-74.005412,40.720016],[-74.005412,40.720016],[-74.005412,40.720016],[-74.005412,40.720016],[-74.005412,40.720016],[-74.005721,40.720152],[-74.005748,40.720116],[-74.005659,40.720076],[-74.005659,40.720076],[-74.005325,40.719919],[-74.005326,40.719978],[-74.005387,40.720005],[-74.005387,40.720005],[-74.005387,40.720005],[-74.005387,40.720005],[-74.005387,40.720005],[-74.005325,40.719978],[-74.005325,40.720024],[-74.005325,40.720024],[-74.005325,40.720024],[-74.005325,40.720024],[-74.005325,40.720024],[-74.005325,40.719978],[-74.005276,40.719957],[-74.005276,40.719957],[-74.005276,40.719957],[-74.005276,40.719957],[-74.005276,40.719957],[-74.005325,40.719978],[-74.005325,40.719919],[-74.005193,40.719857],[-74.005194,40.719861],[-74.005194,40.719861],[-74.005194,40.719861],[-74.005194,40.719861],[-74.005194,40.719861],[-74.005193,40.719857],[-74.005186,40.719854],[-74.005186,40.719854],[-74.005186,40.719854],[-74.005186,40.719854],[-74.005186,40.719854],[-74.005193,40.719857],[-74.005193,40.719855],[-74.005193,40.719855],[-74.005193,40.719855],[-74.005193,40.719855],[-74.005193,40.719855],[-74.005194,40.719857],[-74.005325,40.719919],[-74.005659,40.720075],[-74.006135,40.719459],[-74.005172,40.71902],[-74.005177,40.719223],[-74.005177,40.719223],[-74.005177,40.719223],[-74.005177,40.719223],[-74.005177,40.719223],[-74.005172,40.719019],[-74.004941,40.71891],[-74.004941,40.71891],[-74.004941,40.71891],[-74.004941,40.71891],[-74.004941,40.71891],[-74.005172,40.719019],[-74.005207,40.718883],[-74.005207,40.718883],[-74.005207,40.718883],[-74.005207,40.718883],[-74.005207,40.718883],[-74.005172,40.719019],[-74.006135,40.719458],[-74.006435,40.719069],[-74.006586,40.718873],[-74.005444,40.718338],[-74.005444,40.718338],[-74.005444,40.718337],[-74.005444,40.718337],[-74.005444,40.718337],[-74.006586,40.718873],[-74.007052,40.718269],[-74.005792,40.717684],[-74.005596,40.717941],[-74.005596,40.717941],[-74.005596,40.717941],[-74.005596,40.717941],[-74.005596,40.717941],[-74.005792,40.717683],[-74.005357,40.717483],[-74.005357,40.717483],[-74.005357,40.717483],[-74.005357,40.717483],[-74.005357,40.717483],[-74.005792,40.717683],[-74.006079,40.717308],[-74.00608,40.717308],[-74.00608,40.717308],[-74.00608,40.717308],[-74.00608,40.717308],[-74.005792,40.717683],[-74.007052,40.718269],[-74.007533,40.717668],[-74.006251,40.717085],[-74.006098,40.717284],[-74.006098,40.717284],[-74.006098,40.717284],[-74.006098,40.717284],[-74.006098,40.717284],[-74.00625,40.717085],[-74.00612,40.717024],[-74.00612,40.717024],[-74.00612,40.717024],[-74.00612,40.717024],[-74.00612,40.717024],[-74.006167,40.717046],[-74.006191,40.717016],[-74.006191,40.717015],[-74.006191,40.717015],[-74.006191,40.717016],[-74.006191,40.717016],[-74.006167,40.717046],[-74.00625,40.717085],[-74.006303,40.717018],[-74.00627,40.717002],[-74.006269,40.717002],[-74.006269,40.717002],[-74.00627,40.717002],[-74.00627,40.717002],[-74.006304,40.717018],[-74.00634,40.716971],[-74.00634,40.716971],[-74.006341,40.716971],[-74.006341,40.716971],[-74.006341,40.716971],[-74.006251,40.717085],[-74.007533,40.717668],[-74.007957,40.717122],[-74.007907,40.717099],[-74.007907,40.717099],[-74.007907,40.717099],[-74.007907,40.717099],[-74.007907,40.717099],[-74.007957,40.717122],[-74.007985,40.717087],[-74.007985,40.717087],[-74.007985,40.717087],[-74.007985,40.717087],[-74.007985,40.717087],[-74.007957,40.717122],[-74.009,40.717598],[-74.009064,40.717265],[-74.009115,40.71692],[-74.009069,40.716899],[-74.009069,40.716899],[-74.009069,40.716899],[-74.009069,40.716899],[-74.009069,40.716899],[-74.009115,40.71692],[-74.009127,40.716816],[-74.009127,40.716816],[-74.009127,40.716816],[-74.009127,40.716816],[-74.009127,40.716816],[-74.009115,40.71692],[-74.009209,40.716969],[-74.009209,40.716969],[-74.009209,40.716969],[-74.009209,40.716969],[-74.009209,40.716969],[-74.009115,40.71692],[-74.009064,40.717265],[-74.009635,40.717333],[-74.009635,40.717333],[-74.009991,40.717377],[-74.009915,40.717337],[-74.009915,40.717337],[-74.009915,40.717337],[-74.009915,40.717337],[-74.009915,40.717337],[-74.009991,40.717377],[-74.010632,40.717463],[-74.010784,40.716915],[-74.010775,40.716911],[-74.010775,40.716911],[-74.010775,40.716911],[-74.010775,40.716911],[-74.010775,40.716911],[-74.010784,40.716915],[-74.010787,40.716904],[-74.010787,40.716904],[-74.010787,40.716904],[-74.010787,40.716904],[-74.010787,40.716904],[-74.010784,40.716915],[-74.010784,40.716915],[-74.010632,40.717464],[-74.010475,40.718113],[-74.010352,40.718802],[-74.011358,40.718927],[-74.011458,40.71894],[-74.012028,40.71901],[-74.012053,40.718895],[-74.012053,40.718895],[-74.012053,40.718895],[-74.012053,40.718895],[-74.012053,40.718895],[-74.012028,40.71901],[-74.012101,40.719019],[-74.012101,40.719019],[-74.01218,40.719029],[-74.012208,40.71891],[-74.012293,40.71854],[-74.012293,40.71854],[-74.012293,40.71854],[-74.012293,40.71854],[-74.012293,40.71854],[-74.012208,40.71891],[-74.012351,40.718928],[-74.012598,40.71896],[-74.012728,40.718977],[-74.012728,40.718977],[-74.012886,40.719012],[-74.012886,40.719012],[-74.012887,40.719012],[-74.012886,40.719013],[-74.012886,40.719013],[-74.012728,40.718977],[-74.012597,40.71896],[-74.012351,40.718929],[-74.012208,40.71891],[-74.01218,40.719029],[-74.012325,40.719047],[-74.012325,40.719047],[-74.012325,40.719047],[-74.012325,40.719048],[-74.012325,40.719048],[-74.01218,40.71903],[-74.012154,40.719142],[-74.012299,40.719161],[-74.012673,40.719211],[-74.012856,40.719224],[-74.012856,40.719224],[-74.012856,40.719224],[-74.012856,40.719224],[-74.012856,40.719224],[-74.012673,40.719212],[-74.012673,40.719212],[-74.012299,40.719162],[-74.012154,40.719142],[-74.01204,40.719692],[-74.01204,40.719692],[-74.01204,40.719692],[-74.01204,40.719692],[-74.01204,40.719692],[-74.012154,40.719142],[-74.012154,40.719142],[-74.01218,40.71903],[-74.012101,40.71902],[-74.011458,40.71894],[-74.011458,40.71894],[-74.011358,40.718927],[-74.010352,40.718802]]],[[[-74.006277,40.722854],[-74.006277,40.722854],[-74.006277,40.722854],[-74.006277,40.722854],[-74.006277,40.722854],[-74.006277,40.722854],[-74.006277,40.722854],[-74.006277,40.722854],[-74.006259,40.722852],[-74.006241,40.722968],[-74.006241,40.722968],[-74.006241,40.722968],[-74.006241,40.722968],[-74.006241,40.722968],[-74.006278,40.722732],[-74.006278,40.722732],[-74.006278,40.722732],[-74.006278,40.722732],[-74.006278,40.722732],[-74.006259,40.722852],[-74.006277,40.722854],[-74.006277,40.722854],[-74.006277,40.722854],[-74.006277,40.722854],[-74.006277,40.722854],[-74.006277,40.722854],[-74.006277,40.722854],[-74.006277,40.722854]]]];

  
  newgeo = [];
  geo4.forEach(function(entry) {
      newgeo.push(entry[0]);
  });
  console.log(newgeo);

  geo5 = encodeURIComponent(JSON.stringify(newgeo));
  console.log(geo5);
  
  document.getElementById("1").value = geo;
  document.getElementById("2").value = geo2;
  document.getElementById("3").value = geo3;
  document.getElementById("4").value = geo4;
  document.getElementById("5").value = geo5;
  //fuctions and shit
  
  url = 'https://geoenrich.arcgis.com/arcgis/rest/services/World/geoenrichmentserver/GeoEnrichment/enrich?StudyAreas=[{"geometry":{"rings":'+geo+',"spatialReference":{"wkid":4326}}}]&StudyAreasOptions={"GeometryType":"esriGeometryPolygon","SpatialRelationship":"esriSpatialRelIntersects"}&dataCollections=["KeyUSFacts"]&returngeometry=true&f=pjson&token=' + token

function showPop(str) {
  var xhttp;    
  if (str == "") {
    document.getElementById("txtHint").innerHTML = "";
    return;
  }
  xhttp = new XMLHttpRequest();
  xhttp.onreadystatechange = function() {
    if (this.readyState == 4 && this.status == 200) {
      var ESRI = JSON.parse(this.responseText);
      document.getElementById("txtHint").innerHTML = ESRI.results[0].value.FeatureSet[0].features[0].attributes.TOTPOP_CY;
    }
  };
  xhttp.open("GET", 'https://geoenrich.arcgis.com/arcgis/rest/services/World/geoenrichmentserver/GeoEnrichment/enrich?StudyAreas=[{"geometry":{"rings":'+str+',"spatialReference":{"wkid":4326}}}]&StudyAreasOptions={"GeometryType":"esriGeometryPolygon","SpatialRelationship":"esriSpatialRelIntersects"}&dataCollections=["KeyUSFacts"]&returngeometry=true&f=pjson&token=' + token, true);
  xhttp.send();
}

</script>
</body>

</html>


